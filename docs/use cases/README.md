# Модель прецедентів


## Загальна схема

@startuml

left to right direction

actor "Гість" as Guest
actor "Користувач" as User
actor "Адміністратор" as Expert

usecase "Log in\nЗареєструвати обліковий запис" as UC_1
usecase "Sign in\nУвійти в обліковий запис" as UC_2
usecase "Log out\nВийти із обікового запису" as UC_3
usecase "Media content management\nЗапити на пошук та експорт медіа-контенту" as UC_4
usecase "Account management\nВнесення змін до облікових записів" as UC_5
usecase "Getting information about users\nПереглянути інформацію щодо облікових записів користувачів" as UC_6

Guest --> UC_1
Guest --> UC_2
Guest --> UC_3

User --|> Guest
User --> UC_4

Expert --|> Guest
Expert --> UC_5
Expert --> UC_6
@enduml

## Користувач

@startuml

:Користувач: as user

usecase "Реєстрація облікового запису" as reg
usecase "Авторизація до облікового запису" as log
usecase "Вихід з облікового запису" as exit

usecase "Звернення до служби підтримки" as sup

usecase "Керування обліковим записом" as manage
usecase "Зміна інформації" as ch_info
usecase "Зміна пароля" as ch_pass
usecase "Видалення облікового запису" as del

usecase "Пошук" as search
usecase "Фільтрація даних" as filt
usecase "Завантаження даних" as dl
usecase "Завантаження даних з системи" as dl_out
usecase "Завантаження даних у систему" as dl_in

user -l-> sup
user -u-> exit
user -r-> manage
ch_info -u.> manage:extends
ch_pass -u.> manage:extends
del -u.> manage:extends
user -u-> log
user -u-> reg
user -d-> search
filt -u.> search:extends
user -d-> dl
dl_in -u.> dl:extends
dl_out -u.> dl:extends

@enduml


## Схема використання для адміністратора

@startuml

actor "Адміністратор" as Admin

usecase "<b>acc_manip</b>\nКерування обліковими\n записами користувачів" as ManipAccount 
usecase "<b>inf_manip</b>\nКерування інформацією" as ManipInf 

usecase "<b>delete_account</b>\nВидалення облікового запису\n користувача" as DeleteAccount
usecase "<b>add_inf</b>\nДодавання нової інформації" as AddInf
usecase "<b>add_rights</b>\nНадання додаткових прав\n користувачу" as GrantPermissions
usecase "<b>delete_inf</b>\nВидалення інформації" as DeleteInf

Admin --> ManipAccount
DeleteAccount .u.> ManipAccount: <<extends>>
GrantPermissions .u.> ManipAccount: <<extends>>

Admin --> ManipInf
AddInf .u.> ManipInf: <<extends>>
DeleteInf .u.> ManipInf: <<extends>>

@enduml



## Сценарії використання


### Створення нового облікового запису
| **_ID:_**                | USER.REGISTRATION                                                              |
| ------------------------ | ------------------------------------------------------------------------------ |
| **_НАЗВА:_**             | Зараєструвати користувача в системі                                            |
| **_УЧАСНИКИ:_**          | Користувач, Система                                                            |
| **_ПЕРЕДУМОВИ:_**        | 1. Користувач не зареєстрований у системі                                      |
|                          | 2. Користувач не війшов до системи за допомогою існуючого облікового запису    |
| **_РЕЗУЛЬТАТ:_**         | Новий обліковий запис                                                          |
| **_ВИКЛЮЧНІ СИТУАЦІЇ:_** | 1. Користувач вже зареєстрований                                               |
|                          | 2. Поля містять недопустимі символи                                            |
|                          | 3. Багато здійсненних запитів за останні 5 хвилин                              |
| **_ОСНОВНИЙ СЦЕНАРІЙ:_** | 1. Користувач вводить реєстраційні дані                                        |
|                          | 2. Система перевіряє передані реєстраційні дані                                |
|                          | 3. Система створює новий обліковий запис, використовуючи введені дані          |
|                          | 4. Система надає користувачу інформацію про створення облікового запису        |
|                          | 5. Користувач завершує взаємодію з системою                                    |

@startuml

|Користувач|
start;
:Вводить реєстраційні дані ;


|Система|
: Перевіряє отримані дані з форми;
note right #ff8787
    Можлива виключна ситуація
    DataIsNotCorrectly
    end note

|Система|
: Реєструє нового користувача;

|Система|
: Надсилає сповіщення користувачу\n про успішну реєстрацію;

|Користувач|
stop;
@enduml

### Користувач

#### Авторизація
| **_ID:_**                | User.Login                                                                     |
| ------------------------ | ------------------------------------------------------------------------------ |
| **_НАЗВА:_**             | Авторизація користувача                                                        |
| **_УЧАСНИКИ:_**          | Користувач, Система                                                            |
| **_ПЕРЕДУМОВИ:_**        | Користувач має обліковий запис у системі                                       |
| **_РЕЗУЛЬТАТ:_**         | Отримання доступу користувачем до власного облікового запису                   |
| **_ВИКЛЮЧНІ СИТУАЦІЇ:_** | 1. Наданий логін не зареєстрований у системі                                   |
|                          | 2. Неправильно введений пароль                                                 |
| **_ОСНОВНИЙ СЦЕНАРІЙ:_** | 1. Користувач тисне на кнопку входу                                            |
|                          | 2. Система переводить користувача на екран для авторизації                     |
|                          | 3. Користувач вводить дані облікового запису і натикає кнопку «Увійти»         |
|                          | 4. Система виконує ідентифікацію і перевірку даних                             |
|                          | 5. Система надає користувачу доступ до облікового запису                       |
|                          | 6. Користувач завершує взаємодію з системою                                    |

<center>

@startuml
|Користувач|
    start;
    : Вибирає опцію входу в обліковий запис;
|Система|
    : Надає форму для введення \nідентифікуючих даних;
|Користувач|
    : Заповнює поля даних: логін і пароль;
    : Тисне на кнопку «Увійти»;
|Система|
    : Отримання запиту на авторизацію \nта обробка даних;
    : Перевірка валідності даних \nпо відношенню до існуючих акаунтів;
    
    note right #ffaaaa
    Можливі виключні ситуації:
    LoginIsNotCorrectly
    PasswordIsNotCorrectly
    end note
    
    : Авторизує користувача \nв обліковий запис;
|Користувач|
    : Отримує доступ до власного \nоблікового запису;
    stop;
@enduml

</center>



#### Видалення облікового запису користувача
| **_ID:_**                | User.Delete_Account                                                            |
| ------------------------ | ------------------------------------------------------------------------------ |
| **_НАЗВА:_**             | Видалити обліковий запис користувача.                                       |
| **_УЧАСНИКИ:_**          | Користувач, Система                                                            |
| **_ПЕРЕДУМОВИ:_**        | Користувач має обілковий запис у системі.                                      |
| **_РЕЗУЛЬТАТ:_**         | Видалення облікового запису користувача із усіма його даними.                  |
| **_ВИКЛЮЧНІ СИТУАЦІЇ:_** | Даного облікового запису користувача не існує.                                 |
| **_ОСНОВНИЙ СЦЕНАРІЙ:_** | 1. Користувач авторизовується у системі.                                       |
|                          | 2. Користувач заходить у кабінет його облікового запису.                       |
|                          | 3. Користувач тисне на кнопку «Видалити обліковий запис».                      |
|                          | 4. Система попереджує користувача повідомленням «Ви дійсно хочете видалити свій обліковий запис із усіма даними? Ця дія незворотня!»  |
|                          | 5. Користувач підтверджує свій вибір, натиснувши на кнопку «Так, я впевнений». |
|                          | 6. Система видаляє обліковий запис користувача із усіма його даними.           |
|                          | 7. Система повертає користувача на головну сторінку для створення облікового     записуавторизації  у обліковий запис.   |
|                          | 8. Користувач завершує взаємодію з системою                                    | 

@startuml

    |Користувач|
        start;
        : Авторизовується у системі;
        : Заходить у кабінет облікового запису;
        : Тисне на кнопку "Видалити обліковий запис";

    |Система|
        : Попереджує користувача повідомленням
         "Ви дійсно хочете видалити свій
         обліковий запис із усіма даними?
         Ця дія незворотня!";

    |Користувач|
        : Підтверджує свій вибір, натиснувши
         на кнопку "Так, я впевнений";

    |Система|
        : Видаляє обліковий запис користувача
         із усіма його даними;
        note right #ff8787
        Можлива виключна ситуація
        UserIsNotAuthorized
        end note
        : Повертає користувача на головну сторінку
         для створення облікового запису / авторизації
         в обліковий запис;

    |Користувач|
        : Завершує взаємодію з системою;
        stop;

@enduml



#### Пошук медіа-контенту
| **_ID:_**                | Media.Find                                                                     |
| ------------------------ | ------------------------------------------------------------------------------ |
| **_НАЗВА:_**             | Знайти медіа-контент                                                           |
| **_УЧАСНИКИ:_**          | Користувач, Система                                                            |
| **_ПЕРЕДУМОВИ:_**        | 1. Користувач має обілковий запис у системі.                                   |
|                          | 2. Користувач авторизований                                                    |
| **_РЕЗУЛЬТАТ:_**         | Надання результатів аналізу медіа-контенту                                     |
| **_ВИКЛЮЧНІ СИТУАЦІЇ:_** | 1. Медіа-контент не знайдено.                                                  |
|                          | 2. Користувач ввів некоректні дані.                                            |
| **_ОСНОВНИЙ СЦЕНАРІЙ:_** | 1. Користувач налаштовує фільтри та надсилає запит на пошук медіа-контенту     |
|                          | 2. Система здійснює пошук у базах даних відповідно до налаштованих фільтрів і введеного користувачем запиту |
|                          | 3. Система аналізує знайдений медіа-контент                                    |
|                          | 4. Система формує результати, враховуючи проведений аналіз                     |
|                          | 5. Система виводить знайдений медіа-контент користувачеві                      |
|                          | 6. Користувач завершує взаємодію з системою                                    |

@startuml

|Користувач|
    start;
    : Авторизовується у системі;
    : Вводить свій запит у систему пошуку медіа контенту;

|Система|
    : Аналізує запит користувача та використовує його
    для пошуку релевантного контенту;
    note right #ff8787
    Можлива виключна ситуація
    DataIsNotCorrectly
    end note
    : Надає користувачеві список релевантних медіа одиниць;

|Користувач|
    : Може вибрати з списку медіа одиницю, яка його зацікавила;
    : може переглянути або прослухати обрану медіа одиницю;
    stop;
@enduml


#### Редагування інформації щодо медіа-контенту
| **_ID:_**                | Media.Edit                                                                     |
| ------------------------ | ------------------------------------------------------------------------------ |
| **_НАЗВА:_**             | Редагувати поточну інформацію про медіа-контент у системі                    |
| **_УЧАСНИКИ:_**          | Користувач, Система                                                            |
| **_ПЕРЕДУМОВИ:_**        | 1. Користувач має обілковий запис у системі.                                   |
|                          | 2. Користувач авторизований                                                    |
|                          | 3. Користувач має права на реадагування контенту                               |
| **_РЕЗУЛЬТАТ:_**         | Зміна інформації про вказаний медіа-контент у системі                          |
| **_ВИКЛЮЧНІ СИТУАЦІЇ:_** | 1. Користувач ввів некоректні дані.                                            |
| **_ОСНОВНИЙ СЦЕНАРІЙ:_** | 1. Користувач обирає медіа-контент для редагування                             |
|                          | 2. Користувач редагує інформацію про медіа-контент                             |
|                          | 3. Система оновлює інформацію в базі даних                                     |
|                          | 4. Система підтверджує редагування та оновлює дані контенту                    |
|                          | 5. Користувач завершує взаємодію з системою                                    |

@startuml

|Користувач|
    start;
    : Авторизовується у системі.;
    : Подає запит системі на редагування медіа контенту;

|Система|
    : Перевіряє доступ користувача до
     редагування медіа контенту;
     note right #ff8787
    Можлива виключна ситуація
     UserHasNoRights
     end note
    : Відображає користувачеві інтерфейс редагування;

|Користувач|
    : Робить необхідні зміни та надсилає системі;

|Система|
    : Зберігає всі зміни зроблені користувачем;

|Користувач|
    stop;
@enduml



#### Видалення медіа-контенту
| **_ID:_**                | Media.Delete                                                                   |
| ------------------------ | ------------------------------------------------------------------------------ |
| **_НАЗВА:_**             | Видалити медіа-контент                                                         |
| **_УЧАСНИКИ:_**          | Користувач, Система                                                            |
| **_ПЕРЕДУМОВИ:_**        | Користувач авторизований у системі та має права на видалення контенту          |
| **_РЕЗУЛЬТАТ:_**         | Видалення даних за вказаним ідентифікатором                                    |
| **_ВИКЛЮЧНІ СИТУАЦІЇ:_** | Контент з таким ідентифікатором не існує чи перебуває в стадії видалення       |
| **_ОСНОВНИЙ СЦЕНАРІЙ:_** | 1. Користувач обирає медіа-контент для видалення                               |
|                          | 2. Використовується опція видалення                                            |
|                          | 3. Система виводить вікно для підтвердження                                    |
|                          | 4. Здійснюється підтвердження операції натисканням на кнопку «Видалити»        |
|                          | 5. Система приймає запит і стирає дані за вхідним вказівником                  |
|                          | 6. Користувач завершує взаємодію з системою                                    |

@startuml

|Користувач|
start
: Користувач обирає медіа-контент для видалення;

|Система|
: Система перевіряє наявність прав у користувача;
note right #ff8787
Можлива виключна ситуація
PermissionDeniedException
end note
: Система перевіряє наявність медіа-контенту;
note right #ff8787
Можлива виключна ситуація
InvalidContentldException
end note
: Система видаляє вказаний медіа-контент з бази даних;
: Система підтверджує видалення користувачу та оновлює список контенту;

|Користувач|
stop

@enduml

### Адміністратор

#### Надання користувачу додаткових прав 
| **_ID:_**                | Admin.Promote_User                                                             |
| ------------------------ | ------------------------------------------------------------------------------ |
| **_НАЗВА:_**             | Надати користувачу права                                                       |
| **_УЧАСНИКИ:_**          |    Адміністратор, система, користувач                                          |
| **_ПЕРЕДУМОВИ:_**        | 1. Адміністратор знаходиться під своїм обліковим записом                       |
|                          | 2. Даний користувач зареєстрований у системі                                   |
|                          | 3. Обліковий запис користувача не заблокований                                 |
| **_РЕЗУЛЬТАТ:_**         | Вибраний користувач отримує права                                              |
| **_ВИКЛЮЧНІ СИТУАЦІЇ:_** |    Користувач вже володіє вказаними правами                                    |
| **_ОСНОВНИЙ СЦЕНАРІЙ:_** | 1. Адмінстратор обирає користувача, якому буде надавати права                  |
|                          | 2. Здійснюється підтвердження операції натисканням на кнопку «Надати права»    |
|                          | 4. Система додає привілеї користувачу                                          |
|                          | 5. Система повідомляє про успішне оновлення прав користувача                   |
|                          | 6. Користувач завершує взаємодію з системою                                    |

@startuml

|Адміністратор|
start;
:Адміністратор обирає користувача\nта передає дані в систему;
|Система|
:Система перевіряє наявність\nоблікового запису користувача;
note right #ff8787

    UserAlreadyBanned

    end note
    :Система перевіряє роль\nоблікового запису;
    note right #ff8787

    UserIsAdministrator

    end note
    :Система змінює роль\nкористувача;
    :Система надає користувачу\nінтерфейс з відповідними правам;
|Адміністратор|
stop;

@enduml




#### Блокування користувача адміністратором
| **_ID:_**                | Admin.Block_User                                                               |
| ------------------------ | ------------------------------------------------------------------------------ |
| **_НАЗВА:_**             | Надати користувачу права адміністратора                                        |
| **_УЧАСНИКИ:_**          |    Адміністратор, система, користувач                                          |
| **_ПЕРЕДУМОВИ:_**        | 1.Користувач зареєстрований у системі                                          |
|                          | 2.Адміністратор виконав вхід у власний обліковий запис                         |
| **_РЕЗУЛЬТАТ:_**         |  Блокування облікового запису користувача адміністратором.                     |
| **_ВИКЛЮЧНІ СИТУАЦІЇ:_** |   Даний обліковий запис користувача вже був заблокований.                      |
| **_ОСНОВНИЙ СЦЕНАРІЙ:_** | 1. Користувач має обліковий запис у системі.                                   |
|                          | 2.  Адміністратор авторизовується у системі під своїм обліковим записом, який наділений правами блокування користувачів.  |
|                          | 3. Адміністратор обирає обліковий запис користувача для блокування.            |
|                          | 4. Система попереджує адміністратора повідомленням «Ви дійсно хочете заблокувати обліковий запис користувача?» |
|                          | 5.  Адміністратор підтверджує свій вибір натиснувши на кнопку «Так, я впевнений». |
|                          | 6. Система виконує блокування облікового запису користувача.                   |
|                          | 7. Адмінстратор завершує взаємодію з системою                                  |


@startuml

    |Адміністратор|
        start;
        : Авторизовується у системі
         під своїм обліковим записом;
        : Обирає обліковий запис користувача
         для блокування;

    |Система|
        : Попереджує адміністратора повідомленням
         "Ви дійсно хочете заблокувати обліковий
         запис користувача?";

    |Адміністратор|
        : Підтверджує свій вибір, натиснувши
         на кнопку "Так, я впевнений";

    |Система|
        : Виконує блокування облікового
         запису користувача;
         note right #ff8787
    UserAlreadyBanned
    end note
        

    |Адміністратор|
        stop;

@enduml



